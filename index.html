<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CromeCast Connect</title>
</head>

<center><i><b>Welcome to the jungle. We have fun and games.</b></i></center>
<p></p>

<script src="https://www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>
<script src="build/pdf.js"></script>
<script src="compatibility.js"></script>	
<script src="PdfGet.js"></script>
<script src="CommandParse.js"></script>
	
<script type="text/javascript">
    var channel = "urn:x-cast:com.example.chrome_send_world_2";
	
	function onSenderConnected(event){
		var string = "onChannelOpened. Total number of channels: " + window.castReceiverManager.getSenders().length;
		document.getElementById("Conexao").innerHTML = string.toString();
	}
	
	function onSenderDisconnected(event){
		if (window.castReceiverManager.getSenders().length == 0) window.close();
	}
	
	function onError(){}
	
	function onMessage(event){
		var message = event.data;
		whatCommand(message);	
	}
	
	function onLoadCast(){
		window.castReceiverManager = cast.receiver.CastReceiverManager.getInstance();
		window.castReceiverManager.onSenderConnected = onSenderConnected;
		window.castReceiverManager.onSenderDisconnected = onSenderDisconnected;
		
		window.customMessageBus = window.castReceiverManager.getCastMessageBus(channel);
		window.customMessageBus.onMessage = onMessage;
		
		window.castReceiverManager.start();
	}
	
	function broadcast(message){
		window.customMessageBus.broadcast(message);
	}
	
	window.addEventListener("load", onLoadCast);
</script>

<body>
<output id="Conexao" style="float: right;"></output>
	
<div style="position: relative;">
        <canvas id="canvasPDF"  style="position: absolute; left: 0; top: 0; z-index: 0; "></canvas>
        <canvas id="canvasDraw" style="position: absolute; left: 0; top: 0; z-index: 1; "></canvas>
        <canvas id="canvasLaser" style="position: absolute; left: 0; top: 0; z-index: 2; "></canvas>
</div>

</body>

</html>
