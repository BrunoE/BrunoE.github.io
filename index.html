<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Chromecast</title>
</head>

<script src="https://www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>
<script src="build/pdf.js"></script>
<script src="CommandParse.js"></script>
<script src="PdfGet.js"></script>

<script type="text/javascript">
    var app_id = "1AA02BA5";
    var namespace = "urn:x-cast:com.example.chrome_send_world_2";
    var messageReceived;
    
    function onChannelOpened(event){
        var string = "onChannelOpened. Total number of channels: " + window.castReceiverManager.getSenders().length;
    }
    
    function onChannelClosed(event){
        if (window.castReceiverManager.getSenders().length == 0) window.close();
    }
    
    function onMessage(event){
        var message = event.data;
        whatCommand(message);
    }
    
    function onLoad(){
        window.castReceiverManager = cast.receiver.CastReceiverManager.getInstance();
        window.castReceiverManager.onSenderConnected = onChannelOpened;
        window.castReceiverManager.onSenderDisconnected = onChannelClosed;
        
        window.customMessageBus = window.castReceiverManager.getCastMessageBus(namespace);
        window.customMessageBus.onMessage = onMessage;
        
        window.castReceiverManager.start();
    }
    
    window.addEventListener("load", onLoad);
</script>
    
<body>
    <canvas id="canvas_1" style="border:1px  solid black" ></canvas>
</body>
</html>
